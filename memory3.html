<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬æ—¶è®°å¿†æ¸¸æˆ</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        h1, #info {
            margin: 10px;
            font-size: 24px;
        }
        #gameBoard {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            width: 100%;
        }
        #emojiDisplay {
            font-size: 20vw; /* å¤§å›¾å æ®å±å¹•å®½åº¦çš„20% */
        }
        #options {
            display: flex;
            justify-content: space-around;
            width: 90%; /* é€‰é¡¹å›¾å æ®å±å¹•å®½åº¦çš„90% */
            margin-top: 20px;
        }
        .option {
            font-size: 10vw; /* é€‰é¡¹å›¾å æ®å±å¹•å®½åº¦çš„10% */
            cursor: pointer;
            padding: 10px;
            background-color: #e0e0e0;
            border-radius: 10px;
            text-align: center;
            transition: background-color 0.3s;
        }
        .option:hover {
            background-color: #d0d0d0;
        }
        @media (min-width: 768px) {
            #emojiDisplay {
                font-size: 30vw; /* å¤§å›¾å æ®å±å¹•å®½åº¦çš„15% */
            }
            .option {
                font-size: 10vw; /* é€‰é¡¹å›¾å æ®å±å¹•å®½åº¦çš„7.5% */
            }
        }
        @media (min-width: 1024px) {
            #emojiDisplay {
                font-size: 30vw; /* å¤§å›¾å æ®å±å¹•å®½åº¦çš„10% */
            }
            .option {
                font-size: 12vw; /* é€‰é¡¹å›¾å æ®å±å¹•å®½åº¦çš„5% */
            }
        }
    </style>
</head>
<body>

<h1>ç¬æ—¶è®°å¿†æ¸¸æˆ</h1>
<div id="info">
    <p>å‰©ä½™æ—¶é—´: <span id="time">120</span> ç§’</p>
    <p>æ€»å¾—åˆ†: <span id="score">0</span></p>
</div>

<div id="gameBoard">
    <div id="emojiDisplay">ğŸ˜Š</div>
    <div id="options">
        <!-- é€‰é¡¹æŒ‰é’® -->
        <div class="option" id="option1"></div>
        <div class="option" id="option2"></div>
        <div class="option" id="option3"></div>
        <div class="option" id="option4"></div>
    </div>
</div>

<div class="popup" id="popup">
    <p>æ¬¢è¿æ¥åˆ°è®°å¿†è®­ç»ƒæ¸¸æˆï¼è¯·è®°ä½å‡ºç°çš„å¤§å›¾ï¼Œå¹¶åœ¨ä¸‹ä¸€è½®çš„4ä¸ªé€‰é¡¹ä¸­æ‰¾åˆ°è¿™ä¸ªå›¾ã€‚ç‚¹å‡»å¼€å§‹æŒ‰é’®å¼€å§‹æ¸¸æˆã€‚</p>
    <button id="startBtn">å¼€å§‹</button>
</div>
<div class="popup" id="endPopup" style="display: none;">
    <p>æ¸¸æˆç»“æŸï¼æ‚¨çš„å¾—åˆ†æ˜¯: <span id="finalScore"></span></p>
    <button id="exitBtn">ç¦»å¼€</button>
    <button id="restartBtn">å†æ¥</button>
</div>
<audio id="matchSound" src="assets/sounds/level-up.mp3"></audio>
<audio id="errorSound" src="assets/sounds/error-8.mp3"></audio>
<audio id="levelUpSound" src="assets/sounds/cute-level-up-2.mp3"></audio>
<audio id="winningSound" src="assets/sounds/winning.mp3"></audio>

<script>
    const emojiList = ["ğŸ˜€", "ğŸ˜", "ğŸ˜‚", "ğŸ¤£", "ğŸ˜ƒ", "ğŸ˜„", "ğŸ˜…", "ğŸ˜†", "ğŸ˜‰", "ğŸ˜Š", "ğŸ˜‹", "ğŸ˜", "ğŸ˜", "ğŸ˜˜", "ğŸ¥°",
        "ğŸ˜—", "ğŸ˜™", "ğŸ˜š", "ğŸ™‚", "ğŸ¤—", "ğŸ¤©", "ğŸ¤”", "ğŸ¤¨", "ğŸ˜", "ğŸ˜‘", "ğŸ˜¶", "ğŸ™„", "ğŸ˜", "ğŸ˜£", "ğŸ˜¥",
        "ğŸ˜®", "ğŸ¤", "ğŸ˜¯", "ğŸ˜ª", "ğŸ˜«", "ğŸ¥±", "ğŸ˜´", "ğŸ˜Œ", "ğŸ˜›", "ğŸ˜œ", "ğŸ¤ª", "ğŸ˜", "ğŸ¤‘", "ğŸ¤¤", "ğŸ˜“",
        "ğŸ˜”", "ğŸ˜•", "ğŸ™ƒ", "ğŸ§", "ğŸ¤“", "ğŸ˜¤", "ğŸ˜ ", "ğŸ˜¡", "ğŸ¤¬", "ğŸ˜ˆ", "ğŸ‘¿", "ğŸ’€", "â˜ ", "ğŸ‘»", "ğŸ‘½",
        "ğŸ‘¾", "ğŸ¤–", "ğŸ˜º", "ğŸ˜¸", "ğŸ˜¹", "ğŸ˜»", "ğŸ˜¼", "ğŸ˜½", "ğŸ™€", "ğŸ˜¿", "ğŸ˜¾", "ğŸ™ˆ", "ğŸ™‰", "ğŸ™Š", "ğŸ’‹",
        "ğŸ’Œ", "ğŸ’˜", "ğŸ’", "ğŸ’–", "ğŸ’—", "ğŸ’“", "ğŸ’", "ğŸ’•", "ğŸ’Ÿ", "â£", "ğŸ’”", "ğŸ’¯", "ğŸ’¢", "ğŸ’¥", "ğŸ’«",
        "ğŸ’¦", "ğŸ’¨", "ğŸ•³", "ğŸ’£", "ğŸ’¬", "ğŸ‘", "ğŸ‘€", "ğŸ‘‚", "ğŸ‘ƒ", "ğŸ‘…", "ğŸ‘„", "ğŸ§ ", "ğŸ‘¤", "ğŸ‘¥", "ğŸ—£","ğŸ‡¨ğŸ‡³"];

    let score = 0;
    let timeLeft = 120;
    let gameInterval;
    let previousEmoji;
    let currentEmoji;
    const scoreElement = document.getElementById('score');
    const timeElement = document.getElementById('time');
    const emojiDisplay = document.getElementById('emojiDisplay');
    const optionElements = [document.getElementById('option1'), document.getElementById('option2'), document.getElementById('option3'), document.getElementById('option4')];
    const matchSound = document.getElementById('matchSound');
    const errorSound = document.getElementById('errorSound');
    const levelUpSound = document.getElementById('levelUpSound');
    const winningSound = document.getElementById('winningSound');
    function startGame() {
        score = 0;
        timeLeft = 120;
        scoreElement.textContent = `${score}`;
        timeElement.textContent = `${timeLeft}`;
        currentEmoji = getRandomEmoji();
        emojiDisplay.textContent = currentEmoji;
        setTimeout(nextRound, 2000);
        gameInterval = setInterval(updateTimer, 1000);
    }

    function updateTimer() {
        timeLeft--;
        timeElement.textContent = `${timeLeft}`;
        if (timeLeft <= 0) {
            clearInterval(gameInterval);
            document.getElementById('finalScore').textContent = score;
            document.getElementById('endPopup').style.display = 'block';
            winningSound.play();
        }
    }

    function getRandomEmoji() {
        const randomIndex = Math.floor(Math.random() * emojiList.length);
        return emojiList[randomIndex];
    }

    function nextRound() {
        previousEmoji = currentEmoji;
        currentEmoji = getRandomEmoji();
        emojiDisplay.textContent = currentEmoji;

        const correctOptionIndex = Math.floor(Math.random() * 4);
        optionElements.forEach((option, index) => {
            if (index === correctOptionIndex) {
                option.textContent = previousEmoji;
            } else {
                let randomEmoji;
                do {
                    randomEmoji = getRandomEmoji();
                } while (randomEmoji === previousEmoji || randomEmoji === currentEmoji);
                option.textContent = randomEmoji;
            }
        });

        optionElements.forEach(option => {
            option.onclick = handleOptionClick;
        });
    }

    function handleOptionClick(event) {
        const chosenEmoji = event.target.textContent;
        if (chosenEmoji === previousEmoji) {
            score += 10;
            const matchSoundClone = matchSound.cloneNode();
            matchSoundClone.play();
        } else {
            score -= 10;
            const errorSoundClone = errorSound.cloneNode();
            errorSoundClone.play();
        }
        scoreElement.textContent = `${score}`;
        nextRound();
    }

    function resetGame() {
        clearInterval(gameInterval);
        emojiDisplay.textContent = '';
        optionElements.forEach(option => {
            option.textContent = '';
        });
        scoreElement.textContent = `0`;
        timeElement.textContent = `120`;
    }

    document.getElementById('startBtn').addEventListener('click', () => {
        document.getElementById('popup').style.display = 'none';
        startGame();
    });

    document.getElementById('exitBtn').addEventListener('click', () => {
        window.location.href = 'index.html';
    });

    document.getElementById('restartBtn').addEventListener('click', () => {
        document.getElementById('endPopup').style.display = 'none';
        resetGame();
    });
</script>

</body>
</html>